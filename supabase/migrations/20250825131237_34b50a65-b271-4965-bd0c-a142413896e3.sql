-- Add Section 1: أساسيات الاتصال with all topics and lessons

-- Insert the main section
INSERT INTO public.grade11_sections (title, description, order_index, created_by) VALUES (
  'יסודות התקשורת – أساسيات الاتصال',
  'هذا القسم يقدّم للطالب المبادئ الأساسية في عالم الشبكات. نتعرّف فيه على العناصر التي تُشكّل الشبكة، الطرق المختلفة لتمثيلها، الأدوات التي تساعدنا على التدريب، وأنواع الشبكات من المحلية حتى الإنترنت العالمي. هذه المعرفة هي الأساس لفهم أي موضوع متقدم في الاتصالات.',
  1,
  auth.uid()
);

-- Get the section ID for foreign key relationships
DO $$
DECLARE
    section_id uuid;
    topic1_id uuid;
    topic2_id uuid;
    topic3_id uuid;
    topic4_id uuid;
    topic5_id uuid;
BEGIN
    -- Get the section ID we just created
    SELECT id INTO section_id FROM public.grade11_sections WHERE title = 'יסודות התקשורת – أساسيات الاتصال';

    -- Insert Topic 1: مركبات الاتصال الأساسية
    INSERT INTO public.grade11_topics (section_id, title, content, order_index) VALUES (
        section_id,
        'مركبات الاتصال الأساسية (מרכיבי תקשורת בסיסיים)',
        'المكونات الأساسية التي تشكل أي شبكة اتصال، من الأجهزة الطرفية إلى الأجهزة الوسيطة ووسائط النقل.',
        1
    ) RETURNING id INTO topic1_id;

    -- Insert Topic 2: برنامج المحاكاة
    INSERT INTO public.grade11_topics (section_id, title, content, order_index) VALUES (
        section_id,
        'برنامج المحاكاة (תוכנת סימולטור)',
        'استخدام برامج المحاكاة لتصميم واختبار الشبكات افتراضياً قبل التنفيذ الفعلي.',
        2
    ) RETURNING id INTO topic2_id;

    -- Insert Topic 3: الطوبولوجيا الفيزيائية والمنطقية
    INSERT INTO public.grade11_topics (section_id, title, content, order_index) VALUES (
        section_id,
        'الطوبولوجيا الفيزيائية والمنطقية (טופולוגיות פיזיות ולוגיות)',
        'فهم الشكل الفيزيائي للشبكة وطريقة انتقال البيانات منطقياً عبرها.',
        3
    ) RETURNING id INTO topic3_id;

    -- Insert Topic 4: LAN, WAN, Internet
    INSERT INTO public.grade11_topics (section_id, title, content, order_index) VALUES (
        section_id,
        'LAN, WAN, Internet',
        'أنواع الشبكات من المحلية إلى العالمية وخصائص كل نوع.',
        4
    ) RETURNING id INTO topic4_id;

    -- Insert Topic 5: الاتصال بالإنترنت
    INSERT INTO public.grade11_topics (section_id, title, content, order_index) VALUES (
        section_id,
        'الاتصال بالإنترنت (החיבור לאינטרנט)',
        'طرق ووسائل الاتصال بالإنترنت في البيوت والمؤسسات.',
        5
    ) RETURNING id INTO topic5_id;

    -- Insert lessons for Topic 1: مركبات الاتصال الأساسية
    INSERT INTO public.grade11_lessons (topic_id, title, content, order_index) VALUES
    (topic1_id, 'مضيف (Host)', 'المضيف هو أي جهاز متصل بالشبكة مثل الحاسوب أو الهاتف الذكي. هذا الجهاز يرسل ويستقبل البيانات عبر عنوان خاص يُسمى (IP Address). المضيف قد يكون جهازًا بسيطًا يفتح صفحات إنترنت أو خادمًا ضخمًا يُخزّن البيانات ويقدّم خدمات لمئات المستخدمين. بدون وجود المضيفين، الشبكة تصبح بلا هدف لأنهم هم مستخدموها الحقيقيون.', 1),
    (topic1_id, 'شبكة عميل/خادم (Server-Client Network)', 'في هذا النوع من الشبكات يوجد جهاز مركزي يُسمى الخادم (Server) يقدّم خدمات مثل البريد الإلكتروني أو قواعد البيانات. الأجهزة الأخرى، التي تسمى العملاء (Clients)، تتصل بالخادم لطلب هذه الخدمات. هذا النظام يجعل الإدارة مركزية وفعالة، لكنه قد يتأثر إذا تعطل الخادم، لذلك الشركات الكبيرة تستعمل أكثر من خادم وتوزيع للأحمال.', 2),
    (topic1_id, 'شبكة نظير إلى نظير (Peer-to-Peer)', 'هنا الأجهزة تتصل مباشرة ببعضها البعض دون وجود خادم مركزي. مثال على ذلك مشاركة الملفات بين حاسوبين متصلين بشبكة منزلية صغيرة. هذه الشبكات سهلة التركيب ورخيصة، لكنها محدودة في الحماية والأمان ولا تناسب المؤسسات الكبيرة.', 3),
    (topic1_id, 'أجهزة طرفية (End Devices)', 'هذه الأجهزة هي ما يستخدمه الطالب أو المستخدم يوميًا مثل الحاسوب، الهاتف، الطابعة أو الكاميرا الذكية. تُعتبر الواجهة المباشرة بين الإنسان والشبكة. عند إرسال رسالة أو فتح فيديو، يبدأ كل شيء من جهاز طرفي وينتهي بجهاز طرفي آخر في الجهة المقابلة.', 4),
    (topic1_id, 'أجهزة وسيطة (Intermediary Devices)', 'هذه الأجهزة لا تنتج بيانات للمستخدم، لكنها تتحكم في مرور البيانات. المبدّل (Switch) يربط الأجهزة داخل الشبكة المحلية، والموجّه (Router) يربط شبكات مختلفة ويوجه الحزم إلى الطريق الصحيح. هناك أيضًا جدران نارية (Firewalls) تحمي من الاختراقات وتمنع التهديدات. هي أشبه بشرطة المرور في الشبكة.', 5),
    (topic1_id, 'وسائط الشبكة (Network Media)', 'البيانات تنتقل عبر وسائط مختلفة: كابلات نحاسية (Copper)، ألياف ضوئية (Fiber Optic)، أو إشارات لاسلكية مثل Wi-Fi و4G/5G. الكابلات أكثر أمانًا واستقرارًا، بينما اللاسلكي يوفر حرية حركة. في معظم الشبكات الحديثة نجد مزيجًا من الاثنين للحصول على أفضل أداء.', 6);

    -- Insert lessons for Topic 2: برنامج المحاكاة
    INSERT INTO public.grade11_lessons (topic_id, title, content, order_index) VALUES
    (topic2_id, 'عرض المكوّنات بشكل رسومي', 'برامج المحاكاة مثل (Packet Tracer) تُظهر الأجهزة كأيقونات رسومية سهلة الفهم: راوتر، سويتش، حاسوب، كابل. الطالب يمكنه رسم الشبكة كما ستبدو في الواقع. هذا يجعل الفهم أوضح من مجرد قراءة نصوص نظرية.', 1),
    (topic2_id, 'العمل مع قوائم المحاكي', 'المحاكي يحتوي على قوائم وأدوات تُتيح للطالب إضافة أجهزة جديدة، تغيير إعدادات، أو مراقبة حركة البيانات. هذه القوائم تُشبه لوحة تحكم فعلية للشبكة لكنها افتراضية، ما يجعل التجربة آمنة وبلا تكلفة.', 2),
    (topic2_id, 'العمل على مشروع محاكاة', 'الطالب يستطيع بناء شبكة افتراضية كاملة، إعداد عناوين IP، تجربة بروتوكولات، وحتى محاكاة فشل أو نجاح الاتصال. هذه التجربة تُعتبر تدريبًا عمليًا يُحاكي ما سيحدث في الشبكة الحقيقية.', 3);

    -- Insert lessons for Topic 3: الطوبولوجيا الفيزيائية والمنطقية
    INSERT INTO public.grade11_lessons (topic_id, title, content, order_index) VALUES
    (topic3_id, 'البيئة الفيزيائية (Physical Topology)', 'هي الشكل الفعلي لتوصيل الأجهزة والكابلات. مثال: الطوبولوجيا النجمية (Star) حيث كل جهاز متصل بمبدّل مركزي، أو الطوبولوجيا الحلقية (Ring) حيث الأجهزة متصلة في دائرة. شكل التوصيل يحدد مدى تأثر الشبكة إذا حدث خلل.', 1),
    (topic3_id, 'البيئة المنطقية (Logical Topology)', 'تصف كيف تتحرك البيانات فعليًا داخل الشبكة بغض النظر عن شكل الكابلات. على سبيل المثال، في شبكة Wi-Fi، قد تكون الأجهزة متصلة بشكل نجمي إلى راوتر واحد، لكن البيانات تنتقل بمنطق البث (Broadcast).', 2),
    (topic3_id, 'الفرق بين الطوبولوجيا الفيزيائية والمنطقية', 'الطوبولوجيا الفيزيائية تركز على "كيف تبدو الشبكة" بينما الطوبولوجيا المنطقية تركز على "كيف تسير البيانات". فهم الاثنين ضروري لحل المشاكل، مثل: هل الخلل بسبب الكابل (فيزيائي) أم بسبب توجيه البيانات (منطقي)؟', 3),
    (topic3_id, 'تمثيل الطوبولوجيا في المحاكي', 'باستخدام برامج المحاكاة يمكن للطالب رسم الشبكة (فيزيائيًا) ومراقبة مسار البيانات (منطقيًا) في نفس الوقت. هذا يوضح العلاقة بين الشكل والوظيفة قبل تنفيذ الشبكة فعليًا.', 4);

    -- Insert lessons for Topic 4: LAN, WAN, Internet
    INSERT INTO public.grade11_lessons (topic_id, title, content, order_index) VALUES
    (topic4_id, 'شبكة محلية LAN', 'شبكة محلية تغطي مساحة صغيرة مثل بيت أو مدرسة. سرعتها عالية وتكلفتها منخفضة، وهي مناسبة لمشاركة الملفات والطابعات بين عدد محدود من المستخدمين.', 1),
    (topic4_id, 'شبكة واسعة WAN', 'تغطي مسافات طويلة جدًا مثل الربط بين مدن أو دول. تحتاج أجهزة قوية واتصالات متطورة مثل الألياف الضوئية أو الأقمار الصناعية. تُستخدم في المؤسسات الكبيرة أو من قبل مزودي الإنترنت.', 2),
    (topic4_id, 'الإنترنت Internet', 'هو أكبر WAN في العالم، يُسمى "شبكة الشبكات" لأنه يربط ملايين الشبكات المحلية والواسعة معًا. بفضله يمكننا تصفح الويب، استخدام البريد الإلكتروني والتواصل الاجتماعي.', 3),
    (topic4_id, 'الفرق بين LAN وWAN', 'LAN تناسب مساحة محدودة وسرعة عالية بأقل تكلفة. WAN مناسبة للمسافات الكبيرة لكنها أبطأ وأغلى. الإنترنت يدمج الاثنين ويوصل العالم كله معًا.', 4);

    -- Insert lessons for Topic 5: الاتصال بالإنترنت
    INSERT INTO public.grade11_lessons (topic_id, title, content, order_index) VALUES
    (topic5_id, 'الإنترنت', 'هو شبكة عالمية عملاقة تصل بين مليارات الأجهزة. يتم تشغيلها باستخدام بروتوكولات موحدة مثل (TCP/IP) تسمح للأجهزة من دول مختلفة بالتواصل بسهولة.', 1),
    (topic5_id, 'وسائل الاتصال', 'هناك طرق مختلفة للوصول للإنترنت: DSL عبر خطوط الهاتف، كابل ألياف ضوئية بسرعة عالية، كابل تلفزيوني، أو شبكات خلوية (4G/5G). كل وسيلة تختلف من حيث السرعة والتكلفة.', 2),
    (topic5_id, 'وسائل الاتصال في البيوت والمكاتب الصغيرة', 'غالبًا نستخدم راوتر منزلي موصول بمزود الخدمة (ISP). الراوتر يوزّع الإنترنت عبر Wi-Fi أو كابلات LAN إلى كل الأجهزة في البيت أو المكتب.', 3),
    (topic5_id, 'شبكة مؤسسية (רשת מנוהלת)', 'في المؤسسات الكبيرة، يتم استخدام تقنيات متقدمة مثل VPN أو خطوط خاصة (Leased Lines) لزيادة الأمان وضمان استمرارية الخدمة بين الفروع المختلفة.', 4);

END $$;